εξοικείωση με την διαδιεργασιακή
επικοινωνία (IPC-Inter-Process Communication) και με την χρήση ανώνυμων αγωγών
(anonymous pipes).
Για τον σκοπό αυτό, καλείστε να υλοποιήσετε με χρήση των κλήσεων συστήματος
pipe() και fork() ένα «ηλεκτρονικό κατάστημα» e-shop που δέχεται παραγγελίες από
πελάτες μέσω «διαδικτύου».
Περιγραφή
Το eshop θα έχει έναν κατάλογο με προϊόντα για τα οποία υπάρχει περιορισμένος
διαθέσιμος αριθμός τεμαχίων για το κάθε ένα.
Οι «πελάτες» θα υποβάλλουν το αίτημα για αγορά των προϊόντων στο ηλεκτρονικό
κατάστημα, και εάν τα προϊόντα είναι διαθέσιμα, το κατάστημα θα ενημερώνει τον
πελάτη για την επιτυχία της παραγγελίας, τη συνολική χρέωση και θα δεσμεύει τα
προϊόντα. Σε διαφορετική περίπτωση, θα ενημερώνει τον πελάτη ότι δεν υπάρχει το
προϊόν που ζήτησε.
Το ηλεκτρονικό κατάστημα θα έχει ένα συγκεκριμένο χρόνο διεκπεραίωσης της
παραγγελίας (έστω 0,5 δευτερόλεπτα). Στο χρόνο αυτό, δεν θα δέχεται άλλες
παραγγελίες, μέχρι να τελειώσει την εξυπηρέτηση.
Ο κάθε πελάτης θα υποβάλλει μια σειρά από παραγγελίες με διαφορά π.χ. 1
δευτερολέπτων μεταξύ των παραγγελιών.
Μόλις ολοκληρωθούν όλες οι παραγγελίες, το ηλεκτρονικό κατάστημα θα εξάγει μια
συγκεντρωτική αναφορά στην οποία θα περιγράφονται για κάθε προϊόν οι παρακάτω
πληροφορίες:
1) Περιγραφή προϊόντος
1) Αριθμός αιτημάτων για αγορά
2) Αριθμός τεμαχίων που πουλήθηκαν
3) Λίστα χρηστών που δεν εξυπηρετήθηκαν (δηλαδή δεν βρήκαν το προϊόν διαθέσιμο)
Στο τέλος της αναφοράς θα τυπώνεται ένα συγκεντρωτικό μήνυμα που θα
περιέχει:
1) Συνολικό αριθμό παραγγελιών
2) Συνολικό αριθμό επιτυχημένων παραγγελιών
3) Συνολικό αριθμό αποτυχημένων παραγγελιών
4) Συνολικός τζίρος 


**Οδηγίες Υλοποίησης**
Τον κατάλογο θα τον υλοποιήσετε μέσω ενός πίνακα (έστω catalog) ο οποίος θα
υπάρχει στην πατρική διεργασία. Ο πίνακας θα έχει ένα μέγεθος από π.χ. 20
διαφορετικά προϊόντα. Το κάθε προϊόν θα είναι μια δομή (struct) που θα υλοποιήσετε
εσείς και θα περιέχει τουλάχιστον τα παρακάτω πεδία: description, price,
item_count. Για κάθε προϊόν θέστε την τιμή item_count σε 2 (δηλαδή υπάρχουν 2
διαθέσιμα προϊόντα με αυτή την περιγραφή).
Η αρχική διεργασία (πατρική) θα εκτελεί την εργασία του eshop. Η πατρική διεργασία
Θα πρέπει να αρχικοποιήσει τον πίνακα catalog και επίσης να δημιουργήσει τις
απαραίτητες διοχετεύσεις για επικοινωνία με τους πελάτες με την εντολή pipe(). Μέσω
των διοχετεύσεων θα μπορεί να δέχεται παραγγελίες από τους πελάτες (για μια
παραγγελία οι πελάτες θα γράφουν με write στην διοχέτευση, και ο εξυπηρετητής θα
διαβάζει με read από την διοχέτευση). Για να ενημερωθούν για την πορεία της
παραγγελίας, θα χρειαστεί να δημιουργήσετε μια άλλη διοχέτευση για κάθε
πελάτη, στην οποία ο εξυπηρετητής θα γράφει (write) και από την οποία ο πελάτης
θα διαβάζει (read) το μήνυμα που θα περιγράφει το αποτέλεσμα της παραγγελίας
(δηλαδή αν βρήκε ή όχι το ζητούμενο προϊόν). Συνολικά, θα χρειαστείτε 2 διοχετεύσεις
για κάθε πελάτη. Ο χρόνος διεκπεραίωσης της παραγγελίας θα είναι 1 δευτερόλεπτο.
Μπορείτε να υλοποιήσετε τον χρόνο της διεκπεραίωσης με χρήση της κλήσης
συστήματος sleep() από την πατρική διεργασία.
Πχ sleep(1);
Για τους πελάτες, το πρόγραμμά σας θα δημιουργήσει (μέσω της κλήσης συστήματος
fork()) έναν αριθμό από θυγατρικές διεργασίες που θα έχουν τον ρόλο των
«πελατών». Οι πελάτες θα επικοινωνούν με το eshop μέσω ανώνυμων διοχετεύσεων
(κλήση συστήματος pipe), σύμφωνα με όσα έχουμε πει στη θεωρία. Για τον έλεγχο του
προγράμματος, θα δημιουργήσετε 5 διαφορετικούς πελάτες μέσω διαδοχικών
κλήσεων της fork() σε έναν βρόγχο. Ο κάθε πελάτης θα στέλνει 10 παραγγελίες και
κατόπιν θα τερματίζει την εκτέλεσή του. Μεταξύ των παραγγελιών θα περιμένει 1
δευτερόλεπτο. Η αναμονή μπορεί να υλοποιηθεί με την χρήση της κλήσης συστήματος 

sleep(). Για κάθε παραγγελία, θα εκτελεί την συνάρτηση rand() για να διαλέξει έναν
τυχαίο αριθμό μεταξύ 0 και 20 (όπου 20 είναι τα διαφορετικά προϊόντα). Μόλις διαλέξει
το προϊόν, θα βάζει (write) την παραγγελία του στην διοχέτευση και θα περιμένει το
αποτέλεσμα της παραγγελίας του. 
